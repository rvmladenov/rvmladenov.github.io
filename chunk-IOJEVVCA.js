import{Ac as z,Cc as H,Cd as se,Dc as w,Dd as de,Fa as a,Fc as J,Gb as k,Gc as K,Hb as l,Ib as F,Jb as V,Kc as Q,Lb as j,Lc as U,Mc as X,Nc as Y,Ob as O,Oc as Z,Pb as P,Pc as ee,Qc as te,Ra as E,Sc as D,Tc as m,Vc as oe,Wa as T,Wc as re,Xa as G,Xc as ie,Yc as ne,Zc as ae,_c as le,ab as L,bb as M,ca as N,db as $,eb as v,fb as h,ha as f,hb as y,hc as R,ib as C,ic as W,jb as s,kb as i,kc as q,lb as n,ma as g,mb as B,na as x,qb as A,sb as S,tb as d}from"./chunk-VSF64FJP.js";var u=class o{fb=f(Z);getBoardForm(t,e,r=null){return this.fb.group({row:this.fb.array(Array.from({length:t},()=>this.fb.array(Array.from({length:e},()=>this.fb.control({value:r,disabled:r!==null},[w.pattern(/^[1-9]$/)]))))),col:this.fb.array(Array.from({length:t},()=>this.fb.array(Array.from({length:e},()=>this.fb.control({value:r,disabled:r!==null},[w.pattern(/^[1-9]$/)])))))})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=N({token:o,factory:o.\u0275fac,providedIn:"root"})};var ce=()=>[R,W,Q,H,J,K,U,Y,X,se],pe=(o,t,e,r)=>({"text-gray-500":o,"border-r-2 border-dark-900":t,"border-b-2 border-dark-900":e,"text-red-500 text-bold":r}),fe=(o,t)=>({"text-green-500":o,"text-red-500":t}),ue=(o,t)=>o+"row",_e=(o,t)=>o+"cell";function be(o,t){if(o&1&&(i(0,"div",16),B(1,"input",17),n()),o&2){let e,r,c=t.$implicit,p=t.$index,_=d().$index,I=d(2);s("ngClass",P(4,pe,!!((e=I.initialBoard()[_])!=null&&e[p]),!!p&&(p+1)%3===0,!!_&&(_+1)%3===0,c.invalid&&c.touched)),$("data-real-value",p),a(),s("readonly",!!((r=I.initialBoard()[_])!=null&&r[p]))("formControlName",p)}}function ge(o,t){if(o&1&&(i(0,"div",15),y(1,be,2,9,"div",16,_e),n()),o&2){let e=t.$implicit,r=t.$index;k(`board-row columns-${e.value.length} flex`),s("formArrayName",r),a(),C(e.controls)}}function xe(o,t){o&1&&(i(0,"mat-icon",18),l(1,"hourglass_empty"),n())}function ve(o,t){o&1&&(i(0,"mat-icon"),l(1,"check"),n())}function he(o,t){o&1&&(i(0,"mat-icon"),l(1,"close"),n())}function ye(o,t){if(o&1&&(i(0,"span",11),v(1,ve,2,0,"mat-icon")(2,he,2,0,"mat-icon"),l(3),n()),o&2){let e=d(2);s("ngClass",O(3,fe,e.status()==="solved",e.status()!=="solved")),a(),h(e.status()==="solved"?1:2),a(2),V(" ",e.status()," ")}}function Ce(o,t){if(o&1){let e=A();i(0,"section",1)(1,"div",2)(2,"p",3),l(3," Difficulty: "),i(4,"span",4),l(5),n()(),i(6,"p",3),l(7," Status: "),i(8,"span",4),l(9),n()()(),i(10,"form",5),S("ngSubmit",function(){g(e);let c=d();return x(c.solveBoard())}),i(11,"div",6),y(12,ge,3,3,"div",7,ue),n(),i(14,"div",8)(15,"div",9)(16,"span"),T(17,xe,2,0,"mat-icon",10),n(),v(18,ye,4,6,"span",11),n(),i(19,"div",12)(20,"button",13)(21,"span"),l(22,"Solve"),n()(),i(23,"button",14),S("click",function(){g(e);let c=d();return x(c.validateBoard())}),i(24,"span"),l(25,"Validate"),n()()()()()()}if(o&2){let e=d();a(5),F(e.difficulty()),a(4),F(e.status()??"playing"),a(),s("formGroup",e.boardForm),a(2),C(e.boardForm.controls.row.controls),a(5),s("ngIf",e.isLoading()),a(),h(e.status()!==null?18:-1),a(2),s("disabled",e.isLoading()),a(3),s("disabled",e.isLoading())}}function Be(o,t){o&1&&B(0,"img",19)}var b=class o{store=f(z);boardService=f(u);apiService=f(D);boardForm;difficulty=this.store.selectSignal(ie);status=this.store.selectSignal(ae);solvedBoard=this.store.selectSignal(le);initialBoard=this.store.selectSignal(re);isLoading=this.store.selectSignal(ne);ngOnInit(){this.store.dispatch(m.loadBoard({difficulty:"easy"})),this.store.select(oe).subscribe(t=>{t?.length&&(this.boardForm=this.boardService.getBoardForm(t.length,t[0].length),this.boardForm.patchValue({row:t.map(e=>e.map(r=>r||null)),col:t.map(e=>e.map(r=>r||null))}))})}solveBoard(){this.store.dispatch(m.isLoading({isLoading:!0})),this.apiService.solveBoard(this.boardForm.value).subscribe(t=>{this.boardForm.patchValue({row:t.solution.map(e=>e.map(r=>r||null)),col:t.solution.map(e=>e.map(r=>r||null))}),this.store.dispatch(m.solveBoardSuccess({response:t}))})}validateBoard(){this.store.dispatch(m.isLoading({isLoading:!0})),this.apiService.validateBoard(this.boardForm.value).subscribe(t=>{this.store.dispatch(m.validateBoardSuccess({response:t})),this.store.dispatch(m.isLoading({isLoading:!1}))})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=E({type:o,selectors:[["app-board"]],features:[j([u,D])],decls:5,vars:1,consts:[[1,"w-fit","mx-auto"],[1,"board-container"],[1,"'board-info","flex","justify-between","items-center"],[1,"text-sm"],[1,"italic","text-gray-500"],[3,"ngSubmit","formGroup"],["formArrayName","row",1,"board-body","rounded-sm","border","border-gray-300","p-4","flex","flex-col","w-fit","mx-auto"],[3,"class","formArrayName"],[1,"actions","flex","mt-4"],[1,"flex-1","flex"],["class","animate-spin",4,"ngIf"],[1,"text-sm","flex","items-center","gap-2",3,"ngClass"],[1,"flex-1","flex","justify-end"],["type","submit",1,"mr-4","cursor-pointer","px-4","py-2","rounded-md","text-white","bg-blue-500","hover:bg-indigo-500",3,"disabled"],["type","button",1,"cursor-pointer","px-4","py-2","rounded-md","text-white","bg-blue-500","hover:bg-indigo-500",3,"click","disabled"],[3,"formArrayName"],[1,"board-cell","border","border-gray-300","w-10","h-10","text-center","text-blue-500",3,"ngClass"],[1,"w-full","h-full","text-center","p2",3,"readonly","formControlName"],[1,"animate-spin"],["src","assets/loading.gif","alt","Loading..."]],template:function(e,r){e&1&&(i(0,"section",0),G(1,Ce,26,7)(2,Be,1,0),L(3,1,ce,null,2),n()),e&2&&(a(3),M(!r.isLoading()))},dependencies:[q,te,ee,de],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .board-body[_ngcontent-%COMP%]{background-color:#fff}"]})};var Qe=[{path:"",component:b}];export{Qe as BoardRoutingModule};
